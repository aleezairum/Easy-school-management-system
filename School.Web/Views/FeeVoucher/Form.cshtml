@{
    ViewData["Title"] = ViewData["Title"] ?? "Fee Voucher";
    Layout = "~/Views/Shared/_DashboardLayout.cshtml";
    var voucherId = ViewData["VoucherId"];
    var isEdit = voucherId != null;
}

<style>
    .card {
        border: none;
        border-radius: 16px;
        box-shadow: 0 2px 12px rgba(0, 0, 0, 0.08);
        margin-bottom: 24px;
    }

    .card-header {
        background: white;
        border-bottom: 1px solid #e2e8f0;
        padding: 20px 24px;
        border-radius: 16px 16px 0 0 !important;
    }

    .card-header h5 {
        margin: 0;
        font-weight: 600;
        color: #1e293b;
    }

    .card-body {
        padding: 24px;
    }

    .form-label {
        font-weight: 500;
        color: #475569;
        margin-bottom: 8px;
        font-size: 14px;
    }

    .form-control, .form-select {
        border: 2px solid #e2e8f0;
        border-radius: 10px;
        padding: 10px 14px;
        font-size: 14px;
        transition: all 0.2s;
    }

    .form-control:focus, .form-select:focus {
        border-color: #008649;
        box-shadow: 0 0 0 4px rgba(0, 134, 73, 0.1);
    }

    .form-control[readonly] {
        background-color: #f8fafc;
    }

    .btn-primary {
        background: linear-gradient(135deg, #008649 0%, #006d3b 100%);
        border: none;
        border-radius: 10px;
        padding: 12px 24px;
        font-weight: 600;
        font-size: 14px;
    }

    .btn-secondary {
        background: #f1f5f9;
        border: 2px solid #e2e8f0;
        border-radius: 10px;
        padding: 12px 24px;
        font-weight: 600;
        font-size: 14px;
        color: #64748b;
    }

    .btn-info {
        background: linear-gradient(135deg, #0ea5e9 0%, #0284c7 100%);
        border: none;
        border-radius: 10px;
        color: white;
        padding: 12px 24px;
        font-weight: 600;
        font-size: 14px;
    }

    .section-title {
        font-size: 14px;
        font-weight: 600;
        color: #64748b;
        text-transform: uppercase;
        letter-spacing: 0.5px;
        margin-bottom: 16px;
        padding-bottom: 8px;
        border-bottom: 2px solid #e2e8f0;
    }

    .section-box {
        background: #f8fafc;
        border-radius: 12px;
        padding: 20px;
        margin-bottom: 20px;
        height: 100%;
    }

    .table {
        margin-bottom: 0;
    }

    .table thead th {
        background: #f8fafc;
        border-bottom: 2px solid #e2e8f0;
        padding: 12px 16px;
        font-weight: 600;
        font-size: 13px;
        color: #475569;
        text-transform: uppercase;
        letter-spacing: 0.5px;
        white-space: nowrap;
    }

    .table tbody td {
        padding: 10px 16px;
        vertical-align: middle;
        border-bottom: 1px solid #f1f5f9;
        font-size: 14px;
    }

    .table tbody tr:hover {
        background: #f8fafc;
    }

    .form-check-input:checked {
        background-color: #008649;
        border-color: #008649;
    }

    .radio-group {
        display: flex;
        gap: 20px;
    }

    .radio-group .form-check {
        padding-left: 0;
    }

    .radio-group .form-check-input {
        margin-right: 8px;
    }

    .footer-section {
        background: #f8fafc;
        border-radius: 12px;
        padding: 20px;
        margin-top: 20px;
    }

    .balance-display {
        font-size: 18px;
        font-weight: 700;
        color: #dc2626;
    }

    .fee-table-container {
        max-height: 300px;
        overflow-y: auto;
    }

    @@media (max-width: 991px) {
        .fee-table-container {
            max-height: 200px;
        }
    }

    @@media (max-width: 767px) {
        .fee-table-container {
            max-height: 150px;
        }
    }
</style>

<div class="container-fluid">
    <div id="alertContainer"></div>

    <div class="card">
        <div class="card-body">
            <div class="d-flex justify-content-end mb-3">
                <a href="/feevoucher" class="btn btn-secondary">
                    <i class="bi bi-arrow-left me-1"></i> Back to List
                </a>
            </div>
            <form id="voucherForm">
                <input type="hidden" id="voucherId" value="@(voucherId ?? 0)" />

                <!-- Header Section -->
                <div class="section-title">
                    <i class="bi bi-info-circle me-2"></i>Voucher Information
                </div>
                <div class="row g-3 mb-4">
                    <div class="col-md-3">
                        <label class="form-label">Voucher No</label>
                        <input type="text" class="form-control" id="voucherNo" readonly placeholder="Auto Generated" />
                    </div>
                    <div class="col-md-3">
                        <label class="form-label">Date <span class="text-danger">*</span></label>
                        <input type="date" class="form-control" id="voucherDate" required />
                    </div>
                    <div class="col-md-6">
                        <label class="form-label">Search By</label>
                        <div class="radio-group mt-2">
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="searchType" id="searchNormal" value="normal" checked onchange="toggleSearchFields()">
                                <label class="form-check-label" for="searchNormal">Normal</label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="searchType" id="searchFatherName" value="fatherName" onchange="toggleSearchFields()">
                                <label class="form-check-label" for="searchFatherName">Father's Name</label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="searchType" id="searchFatherCnic" value="fatherCnic" onchange="toggleSearchFields()">
                                <label class="form-check-label" for="searchFatherCnic">Father's CNIC</label>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Search Section (shown when Father's Name or CNIC is selected) -->
                <div id="searchSection" class="row g-3 mb-4" style="display: none;">
                    <div class="col-md-4" id="fatherNameField" style="display: none;">
                        <label class="form-label">Father's Name</label>
                        <div class="input-group">
                            <input type="text" class="form-control" id="fatherName" placeholder="Enter father's name" />
                            <button class="btn btn-primary" type="button" onclick="searchByFather()">
                                <i class="bi bi-search"></i>
                            </button>
                        </div>
                    </div>
                    <div class="col-md-4" id="fatherCnicField" style="display: none;">
                        <label class="form-label">Father's CNIC</label>
                        <div class="input-group">
                            <input type="text" class="form-control" id="fatherCnic" placeholder="XXXXX-XXXXXXX-X" />
                            <button class="btn btn-primary" type="button" onclick="searchByCnic()">
                                <i class="bi bi-search"></i>
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Main Content: Two Panels -->
                <div class="row">
                    <!-- Left Panel: Pay Fee(s) -->
                    <div class="col-lg-6 col-12">
                        <div class="section-box">
                            <div class="section-title">
                                <i class="bi bi-person-fill me-2"></i>Pay Fee(s)
                            </div>
                            <div class="row g-3">
                                <div class="col-md-6">
                                    <label class="form-label">Class <span class="text-danger">*</span></label>
                                    <select class="form-select" id="classId" required onchange="loadSections()">
                                        <option value="">Select Class</option>
                                    </select>
                                </div>
                                <div class="col-md-6">
                                    <label class="form-label">Section <span class="text-danger">*</span></label>
                                    <select class="form-select" id="sectionId" required onchange="loadStudents()">
                                        <option value="">Select Section</option>
                                    </select>
                                </div>
                                <div class="col-md-6">
                                    <label class="form-label">Roll No</label>
                                    <input type="text" class="form-control" id="rollNo" placeholder="Roll No" onchange="searchByRollNo()" />
                                </div>
                                <div class="col-md-6">
                                    <label class="form-label">Student <span class="text-danger">*</span></label>
                                    <select class="form-select" id="studentId" required onchange="loadStudentDetails()">
                                        <option value="">Select Student</option>
                                    </select>
                                </div>
                                <div class="col-md-6">
                                    <label class="form-label">Student ID</label>
                                    <input type="text" class="form-control" id="studentCode" readonly />
                                </div>
                                <div class="col-md-6">
                                    <label class="form-label">Balance</label>
                                    <input type="text" class="form-control balance-display" id="studentBalance" readonly value="0.00" />
                                </div>
                            </div>

                            <!-- Payment To Section -->
                            <div class="section-title mt-4">
                                <i class="bi bi-arrow-right-circle me-2"></i>Payment To
                            </div>
                            <div class="row g-3">
                                <div class="col-md-6">
                                    <label class="form-label">To Type</label>
                                    <select class="form-select" id="toType" onchange="loadToOptions()">
                                        <option value="">Select Type</option>
                                        <option value="bank">Bank</option>
                                        <option value="cash">Cash</option>
                                        <option value="wallet">Mobile Wallet</option>
                                    </select>
                                </div>
                                <div class="col-md-6">
                                    <label class="form-label">To</label>
                                    <select class="form-select" id="toAccount">
                                        <option value="">Select Account</option>
                                    </select>
                                </div>
                                <div class="col-md-12">
                                    <label class="form-label">Balance</label>
                                    <input type="text" class="form-control" id="accountBalance" readonly value="0.00" />
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Right Panel: Choose Fee(s) -->
                    <div class="col-lg-6 col-12">
                        <div class="section-box">
                            <div class="section-title">
                                <i class="bi bi-list-check me-2"></i>Choose Fee(s)
                            </div>
                            <div class="fee-table-container">
                                <table class="table table-hover" id="feeTable">
                                    <thead>
                                        <tr>
                                            <th style="width: 40px;">
                                                <input type="checkbox" class="form-check-input" id="selectAllFees" onchange="toggleAllFees()" />
                                            </th>
                                            <th>Fee Type</th>
                                            <th>Apply Date</th>
                                            <th class="text-end">Amount</th>
                                        </tr>
                                    </thead>
                                    <tbody id="feeTableBody">
                                        <tr>
                                            <td colspan="4" class="text-center text-muted py-4">Select a student to load fees</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Footer Section -->
                <div class="footer-section">
                    <div class="row g-3 align-items-end">
                        <div class="col-lg-2 col-md-4 col-sm-6 col-12">
                            <label class="form-label">Amount</label>
                            <input type="number" class="form-control" id="totalAmount" readonly value="0.00" />
                        </div>
                        <div class="col-lg-2 col-md-4 col-sm-6 col-12">
                            <label class="form-label">Paid <span class="text-danger">*</span></label>
                            <input type="number" class="form-control" id="paidAmount" step="0.01" value="0.00" onchange="calculateChange()" />
                        </div>
                        <div class="col-lg-3 col-md-6 col-12">
                            <label class="form-label">Description</label>
                            <input type="text" class="form-control" id="description" placeholder="Payment description" />
                        </div>
                        <div class="col-lg-2 col-md-4 col-sm-6 col-12">
                            <label class="form-label">Printer</label>
                            <div class="radio-group">
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="printerType" id="printerThermal" value="thermal" checked>
                                    <label class="form-check-label" for="printerThermal">Thermal</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="printerType" id="printerNormal" value="normal">
                                    <label class="form-check-label" for="printerNormal">Normal</label>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-2 col-md-4 col-sm-6 col-12">
                            <div class="form-check mt-4">
                                <input class="form-check-input" type="checkbox" id="sendMessage">
                                <label class="form-check-label" for="sendMessage">Send Message</label>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Action Buttons -->
                <div class="d-flex justify-content-end gap-2 mt-4">
                    <a href="/feevoucher" class="btn btn-secondary">
                        <i class="bi bi-x-lg me-1"></i> Close
                    </a>
                    <button type="button" class="btn btn-primary" onclick="saveVoucher()">
                        <i class="bi bi-check-lg me-1"></i> Save
                    </button>
                    <button type="button" class="btn btn-success" onclick="saveAndPrint()">
                        <i class="bi bi-printer me-1"></i> Save & Print
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>

@section Scripts {
    <script>
         const voucherId = parseInt('@(voucherId ?? 0)') || 0;
        let selectedFees = [];

        $(document).ready(function () {
            $('#voucherDate').val(new Date().toISOString().split('T')[0]);
            loadClasses();

            if (voucherId > 0) {
                loadVoucher(voucherId);
            } else {
                generateVoucherNo();
            }
        });

        function generateVoucherNo() {
            const timestamp = Date.now().toString().slice(-8);
            $('#voucherNo').val('FV-' + timestamp);
        }

        function toggleSearchFields() {
            const searchType = $('input[name="searchType"]:checked').val();

            if (searchType === 'normal') {
                $('#searchSection').hide();
                $('#fatherNameField').hide();
                $('#fatherCnicField').hide();
            } else if (searchType === 'fatherName') {
                $('#searchSection').show();
                $('#fatherNameField').show();
                $('#fatherCnicField').hide();
            } else if (searchType === 'fatherCnic') {
                $('#searchSection').show();
                $('#fatherNameField').hide();
                $('#fatherCnicField').show();
            }
        }

        async function searchByFather() {
            const fatherName = $('#fatherName').val();
            if (!fatherName) {
                showAlert('Please enter father\'s name', 'warning');
                return;
            }
            // API call to search by father's name
            try {
                const response = await fetch(`${API_BASE}/Student/searchByFather?name=${encodeURIComponent(fatherName)}`);
                if (response.ok) {
                    const students = await response.json();
                    populateStudentDropdown(students);
                }
            } catch (error) {
                console.error('Error searching:', error);
            }
        }

        async function searchByCnic() {
            const cnic = $('#fatherCnic').val();
            if (!cnic) {
                showAlert('Please enter father\'s CNIC', 'warning');
                return;
            }
            // API call to search by CNIC
            try {
                const response = await fetch(`${API_BASE}/Student/searchByCnic?cnic=${encodeURIComponent(cnic)}`);
                if (response.ok) {
                    const students = await response.json();
                    populateStudentDropdown(students);
                }
            } catch (error) {
                console.error('Error searching:', error);
            }
        }

        async function loadClasses() {
            try {
                const response = await fetch(`${API_BASE}/SMSClass`);
                if (response.ok) {
                    const classes = await response.json();
                    const select = $('#classId');
                    select.find('option:not(:first)').remove();
                    classes.forEach(c => {
                        select.append(`<option value="${c.id}">${c.vName}</option>`);
                    });
                }
            } catch (error) {
                console.error('Error loading classes:', error);
            }
        }

        async function loadSections() {
            const classId = $('#classId').val();
            const select = $('#sectionId');
            select.find('option:not(:first)').remove();
            $('#studentId').find('option:not(:first)').remove();

            if (!classId) return;

            try {
                const response = await fetch(`${API_BASE}/SMSSection/byClass/${classId}`);
                if (response.ok) {
                    const sections = await response.json();
                    sections.forEach(s => {
                        select.append(`<option value="${s.id}">${s.vName}</option>`);
                    });
                }
            } catch (error) {
                console.error('Error loading sections:', error);
            }
        }

        async function loadStudents() {
            const classId = $('#classId').val();
            const sectionId = $('#sectionId').val();
            const select = $('#studentId');
            select.find('option:not(:first)').remove();

            if (!classId || !sectionId) return;

            try {
                const response = await fetch(`${API_BASE}/Student/byClassSection?classId=${classId}&sectionId=${sectionId}`);
                if (response.ok) {
                    const students = await response.json();
                    populateStudentDropdown(students);
                }
            } catch (error) {
                console.error('Error loading students:', error);
            }
        }

        function populateStudentDropdown(students) {
            const select = $('#studentId');
            select.find('option:not(:first)').remove();
            students.forEach(s => {
                select.append(`<option value="${s.id}" data-student='${JSON.stringify(s)}'>${s.studentName} - ${s.rollNo || ''}</option>`);
            });
        }

        async function loadStudentDetails() {
            const selected = $('#studentId option:selected');
            if (!selected.val()) {
                $('#studentCode').val('');
                $('#studentBalance').val('0.00');
                clearFeeTable();
                return;
            }

            const student = JSON.parse(selected.attr('data-student') || '{}');
            $('#studentCode').val(student.studentCode || student.id);
            $('#rollNo').val(student.rollNo || '');

            // Load student fees
            await loadStudentFees(selected.val());
        }

        async function loadStudentFees(studentId) {
            try {
                const response = await fetch(`${API_BASE}/FeeVoucher/pendingFees/${studentId}`);
                if (response.ok) {
                    const fees = await response.json();
                    renderFeeTable(fees);
                    calculateTotalBalance(fees);
                } else {
                    // Mock data if API doesn't exist yet
                    const mockFees = [
                        { id: 1, feeType: 'Monthly Fee', applyDate: '2024-01-01', amount: 5000, selected: false },
                        { id: 2, feeType: 'Admission Fee', applyDate: '2024-01-01', amount: 10000, selected: false },
                        { id: 3, feeType: 'Lab Fee', applyDate: '2024-01-01', amount: 2000, selected: false }
                    ];
                    renderFeeTable(mockFees);
                    calculateTotalBalance(mockFees);
                }
            } catch (error) {
                console.error('Error loading fees:', error);
            }
        }

        function renderFeeTable(fees) {
            const tbody = $('#feeTableBody');
            tbody.empty();

            if (!fees || fees.length === 0) {
                tbody.html('<tr><td colspan="4" class="text-center text-muted py-4">No pending fees found</td></tr>');
                return;
            }

            fees.forEach(fee => {
                const row = `
                    <tr data-fee='${JSON.stringify(fee)}'>
                        <td>
                            <input type="checkbox" class="form-check-input fee-checkbox"
                                   data-id="${fee.id}" data-amount="${fee.amount}"
                                   onchange="updateSelectedFees()" />
                        </td>
                        <td>${fee.feeType}</td>
                        <td>${formatDate(fee.applyDate)}</td>
                        <td class="text-end">${formatCurrency(fee.amount)}</td>
                    </tr>
                `;
                tbody.append(row);
            });
        }

        function calculateTotalBalance(fees) {
            const total = fees.reduce((sum, fee) => sum + (fee.amount || 0), 0);
            $('#studentBalance').val(formatCurrency(total));
        }

        function clearFeeTable() {
            $('#feeTableBody').html('<tr><td colspan="4" class="text-center text-muted py-4">Select a student to load fees</td></tr>');
        }

        function toggleAllFees() {
            const isChecked = $('#selectAllFees').is(':checked');
            $('.fee-checkbox').prop('checked', isChecked);
            updateSelectedFees();
        }

        function updateSelectedFees() {
            let total = 0;
            selectedFees = [];

            $('.fee-checkbox:checked').each(function () {
                const amount = parseFloat($(this).data('amount')) || 0;
                const id = $(this).data('id');
                total += amount;
                selectedFees.push(id);
            });

            $('#totalAmount').val(total.toFixed(2));
            $('#paidAmount').val(total.toFixed(2));
        }

        function loadToOptions() {
            const toType = $('#toType').val();
            const select = $('#toAccount');
            select.find('option:not(:first)').remove();

            if (toType === 'bank') {
                select.append('<option value="1">HBL - 1234567890</option>');
                select.append('<option value="2">UBL - 0987654321</option>');
            } else if (toType === 'cash') {
                select.append('<option value="3">Main Cash</option>');
                select.append('<option value="4">Petty Cash</option>');
            } else if (toType === 'wallet') {
                select.append('<option value="5">JazzCash</option>');
                select.append('<option value="6">EasyPaisa</option>');
            }
        }

        function searchByRollNo() {
            const rollNo = $('#rollNo').val();
            const classId = $('#classId').val();
            const sectionId = $('#sectionId').val();

            if (!rollNo || !classId || !sectionId) return;

            // Find student by roll number in the dropdown
            const options = $('#studentId option');
            options.each(function () {
                const studentData = $(this).attr('data-student');
                if (studentData) {
                    const student = JSON.parse(studentData);
                    if (student.rollNo === rollNo) {
                        $('#studentId').val($(this).val());
                        loadStudentDetails();
                        return false;
                    }
                }
            });
        }

        function calculateChange() {
            const total = parseFloat($('#totalAmount').val()) || 0;
            const paid = parseFloat($('#paidAmount').val()) || 0;
            // Could show change/due here if needed
        }

        async function saveVoucher() {
            if (!validateForm()) return;

            const data = buildVoucherData();

            try {
                let response;
                if (voucherId > 0) {
                    response = await fetch(`${API_BASE}/FeeVoucher/${voucherId}`, {
                        method: 'PUT',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(data)
                    });
                } else {
                    response = await fetch(`${API_BASE}/FeeVoucher`, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(data)
                    });
                }

                if (response.ok) {
                    showAlert('Fee voucher saved successfully!', 'success');
                    setTimeout(() => window.location.href = '/feevoucher', 1500);
                } else {
                    const error = await response.json();
                    showAlert(error.message || 'Failed to save voucher', 'danger');
                }
            } catch (error) {
                showAlert('Error saving voucher: ' + error.message, 'danger');
            }
        }

        async function saveAndPrint() {
            if (!validateForm()) return;

            const data = buildVoucherData();

            try {
                const response = await fetch(`${API_BASE}/FeeVoucher`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(data)
                });

                if (response.ok) {
                    const result = await response.json();
                    showAlert('Fee voucher saved successfully!', 'success');

                    const printerType = $('input[name="printerType"]:checked').val();
                    if (printerType === 'thermal') {
                        window.open(`/feevoucher/print/${result.id}?thermal=true`, '_blank');
                    } else {
                        window.open(`/feevoucher/print/${result.id}`, '_blank');
                    }

                    if ($('#sendMessage').is(':checked')) {
                        sendPaymentMessage(result.id);
                    }

                    setTimeout(() => window.location.href = '/feevoucher', 2000);
                } else {
                    const error = await response.json();
                    showAlert(error.message || 'Failed to save voucher', 'danger');
                }
            } catch (error) {
                showAlert('Error saving voucher: ' + error.message, 'danger');
            }
        }

        function validateForm() {
            const studentId = $('#studentId').val();
            const paidAmount = parseFloat($('#paidAmount').val());

            if (!studentId) {
                showAlert('Please select a student', 'warning');
                return false;
            }

            if (selectedFees.length === 0) {
                showAlert('Please select at least one fee', 'warning');
                return false;
            }

            if (!paidAmount || paidAmount <= 0) {
                showAlert('Please enter a valid paid amount', 'warning');
                return false;
            }

            return true;
        }

        function buildVoucherData() {
            return {
                VoucherNumber: $('#voucherNo').val(),
                VoucherDate: $('#voucherDate').val(),
                StudentId: parseInt($('#studentId').val()),
                TotalAmount: parseFloat($('#totalAmount').val()),
                PaidAmount: parseFloat($('#paidAmount').val()),
                Description: $('#description').val(),
                ToType: $('#toType').val(),
                ToAccountId: $('#toAccount').val() ? parseInt($('#toAccount').val()) : null,
                FeeIds: selectedFees,
                SendMessage: $('#sendMessage').is(':checked')
            };
        }

        async function sendPaymentMessage(voucherId) {
            try {
                await fetch(`${API_BASE}/FeeVoucher/sendMessage/${voucherId}`, {
                    method: 'POST'
                });
            } catch (error) {
                console.error('Error sending message:', error);
            }
        }

        async function loadVoucher(id) {
            try {
                const response = await fetch(`${API_BASE}/FeeVoucher/${id}`);
                if (response.ok) {
                    const data = await response.json();
                    // Populate form fields with existing data
                    $('#voucherNo').val(data.voucherNumber);
                    $('#voucherDate').val(data.voucherDate?.split('T')[0]);
                    // ... populate other fields
                }
            } catch (error) {
                console.error('Error loading voucher:', error);
            }
        }

        function formatDate(dateString) {
            if (!dateString) return '-';
            const date = new Date(dateString);
            return date.toLocaleDateString('en-GB', { day: '2-digit', month: 'short', year: 'numeric' });
        }

        function formatCurrency(amount) {
            return new Intl.NumberFormat('en-US', { minimumFractionDigits: 2, maximumFractionDigits: 2 }).format(amount || 0);
        }

        function showAlert(message, type) {
            if (type === 'success') {
                toastSuccess(message);
            } else if (type === 'danger' || type === 'error') {
                toastError(message);
            } else if (type === 'warning') {
                toastWarning(message);
            } else {
                toastInfo(message);
            }
        }
    </script>
}
